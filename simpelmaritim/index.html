<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>SIMPEL MARITIM â€“ Nelayan Cerdas & Aman</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700;14..32,800&display=swap" rel="stylesheet">
    <!-- Leaflet (OpenStreetMap) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <!-- CSS Eksternal -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="particle-canvas"></canvas>

    <!-- OVERLAY LOGIN -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-modal">
            <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/simpelmaritim/logo_simpel_maritim.png" alt="Logo SIMPEL MARITIM" onerror="this.style.display='none'">
            <h2>SIMPEL MARITIM</h2>
            <p>Sistem Monitoring Perairan & Laut Situbondo<br>Silakan masuk untuk mengakses informasi terkini.</p>
            <button class="btn-login" id="loginButton"><i class="fas fa-ship"></i> Login & Mulai</button>
        </div>
    </div>

    <!-- KONTEN UTAMA -->
    <div class="main-content" id="mainContent" style="display: none;">
        <div class="container">
            <!-- NOTIFIKASI DESKTOP -->
            <div class="notification-desktop" id="desktopNotification">
                <div class="notification-content">
                    <div class="notification-text">
                        <strong>ğŸ’¡ Anjuran Penggunaan:</strong> Untuk pengalaman terbaik, gunakan perangkat dengan layar lebar atau putar ponsel ke mode lanskap.
                    </div>
                </div>
                <button class="close-notification" onclick="document.getElementById('desktopNotification').style.display='none'">
                    <i class="fas fa-times-circle"></i>
                </button>
            </div>

            <!-- HEADER DIPERBAIKI (DUA BARIS) -->
            <div class="header">
                <div class="header-top">
                    <div class="logo-container">
                        <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/simpelmaritim/logo_simpel_maritim.png" alt="SIMPEL MARITIM" class="logo-img" onerror="this.style.display='none'">
                        <div class="logo-text">
                            <h1>SIMPEL MARITIM</h1>
                            <p>Sistem Monitoring Perairan & Laut Situbondo</p>
                        </div>
                    </div>
                    <div class="date-time" id="dateTimeDisplay">
                        <i class="fas fa-calendar-alt"></i>
                        <span id="currentDate"></span>
                        <i class="fas fa-clock" style="margin-left: 8px;"></i>
                        <span id="currentTime"></span>
                    </div>
                </div>
                <div class="header-bottom">
                    <div class="header-actions">
                        <button class="btn-refresh" onclick="fetchAllData()">
                            <i class="fas fa-sync-alt"></i> <span>Refresh Data</span>
                        </button>
                        <button class="btn-backup" onclick="backupData()">
                            <i class="fas fa-download"></i> <span>Simpan Data</span>
                        </button>
                        <button class="btn-restore" onclick="document.getElementById('restoreFile').click()">
                            <i class="fas fa-upload"></i> <span>Pulihkan Data</span>
                        </button>
                        <input type="file" id="restoreFile" accept=".json" style="display: none;" onchange="restoreData(event)">
                        <a href="https://www.dinasperikanansitubondo.com" target="_blank" rel="noopener noreferrer" class="btn-home">
                            <i class="fas fa-home"></i> <span>Beranda</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- ===== AUDIO PLAYER CONTAINER (TAMBAHAN) ===== -->
            <div id="audioPlayerContainer">
                <div class="audio-header">
                    <span class="audio-title"><i class="fas fa-headphones"></i> Informasi Website Utama</span>
                    <div class="close-btn">
                        <button onclick="closeAudioPlayer()"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <audio id="audioPlayer" controls preload="none">
                    <source src="https://od.lk/s/MzVfNjY1NDMxMjlf/info-simpel-maritim.mp3" type="audio/mpeg">
                    Browser Anda tidak mendukung pemutar audio.
                </audio>
            </div>

            <!-- GRID DATA UTAMA (Arus Laut TELAH DIHAPUS) -->
            <div class="stats-grid">
                <!-- Suhu Laut -->
                <div class="stat-card">
                    <div class="stat-header"><i class="fas fa-thermometer-half"></i><h4>Suhu Laut</h4></div>
                    <div class="stat-value" id="suhuValueCard">-- <span class="unit">Â°C</span></div>
                    <div class="stat-label"><i class="fas fa-map-marker-alt"></i> Perairan Situbondo</div>
                    <div class="stat-label" id="suhuTimeCard"><i class="fas fa-clock"></i> Memuat...</div>
                    <button class="btn-outline" onclick="fetchAllData()"><i class="fas fa-sync-alt"></i> Refresh</button>
                </div>
                <!-- Tinggi Gelombang -->
                <div class="stat-card">
                    <div class="stat-header"><i class="fas fa-water"></i><h4>Tinggi Gelombang</h4></div>
                    <div class="stat-value" id="waveValueCard">-- <span class="unit">m</span></div>
                    <div class="stat-label"><i class="fas fa-map-marker-alt"></i> Perairan Situbondo</div>
                    <div class="stat-label" id="waveTimeCard"><i class="fas fa-clock"></i> Memuat...</div>
                    <div class="stat-label"><i class="fas fa-compass"></i> Arah: <span id="waveDirection">--</span>Â°</div>
                    <div class="stat-label"><i class="fas fa-hourglass-half"></i> Periode: <span id="wavePeriod">--</span> dtk</div>
                </div>
                <!-- Cuaca Terkini -->
                <div class="stat-card">
                    <div class="stat-header"><i class="fas fa-cloud-sun"></i><h4>Cuaca</h4></div>
                    <div class="stat-value" id="weatherTempCard">-- <span class="unit">Â°C</span></div>
                    <div class="stat-label"><i class="fas fa-map-marker-alt"></i> Situbondo</div>
                    <div class="stat-label" id="weatherTimeCard"><i class="fas fa-clock"></i> Memuat...</div>
                    <div class="stat-label"><i class="fas fa-wind"></i> Angin: <span id="windSpeed">--</span> km/j</div>
                    <div class="stat-label"><i class="fas fa-cloud"></i> <span id="weatherDesc">--</span></div>
                </div>
                <!-- Fase Bulan (digabungkan dengan info lain, tidak dihapus) -->
                <div class="stat-card">
                    <div class="stat-header"><i class="fas fa-moon"></i><h4>Fase Bulan</h4></div>
                    <div class="stat-value" id="moonPhase">--</div>
                    <div class="stat-label"><i class="fas fa-calendar-alt"></i> Fase saat ini</div>
                    <div class="stat-label"><span id="moonEmoji"></span></div>
                    <div class="stat-label"><i class="fas fa-info-circle"></i> Pengaruh terhadap ikan</div>
                </div>
            </div>

            <!-- PANDUAN LENGKAP NELAYAN (tetap) -->
            <section class="tips-section">
                <div class="section-header">
                    <h2><i class="fas fa-lightbulb"></i> Panduan Lengkap Nelayan</h2>
                    <p class="section-subtitle">Tips keselamatan, mencari ikan, navigasi, merawat kapal, dan konservasi laut</p>
                </div>
                <div class="tips-grid">
                    <!-- konten tips tetap sama, disalin dari kode asli (tidak diubah) -->
                    <div class="tip-card">
                        <div class="tip-icon-wrapper"><i class="fas fa-life-ring"></i></div>
                        <h3>Keselamatan di Laut</h3>
                        <ul class="tip-list">
                            <li><i class="fas fa-check-circle"></i> <strong>Perlengkapan wajib:</strong> life jacket, pelampung cincin, lampu sinyal, radio VHF, EPIRB jika ada, dan alat apung cadangan.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Pengecekan pra-berlayar:</strong> periksa prakiraan cuaca BMKG, pastikan mesin prima, bahan bakar cukup 30% lebih, tidak ada kebocoran.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Komunikasi darurat:</strong> bawa ponsel kedap air, power bank, peluit. Informasikan rencana melaut ke keluarga atau syahbandar.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Jika terjatuh ke laut:</strong> tetap tenang, mengapung, lambaikan tangan atau gunakan peluit. Jangan berenang melawan arus.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Prosedur kabut/visibilitas rendah:</strong> kurangi kecepatan, nyalakan lampu navigasi, gunakan kompas, bunyikan suling kabut.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Perlengkapan P3K:</strong> kotak P3K tahan air berisi obat anti mabuk laut, perban, antiseptik, dan obat pribadi.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Hindari melaut sendirian:</strong> minimal 2 orang.</li>
                        </ul>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon-wrapper"><i class="fas fa-fish-fins"></i></div>
                        <h3>Cara Cerdas Mencari Ikan</h3>
                        <ul class="tip-list">
                            <li><i class="fas fa-check-circle"></i> <strong>Waktu terbaik:</strong> subuh (04.00â€“07.00) dan senja (15.00â€“18.00).</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Tanda visual:</strong> burung laut berputar, lompatan ikan, riak tidak biasa, perubahan warna air.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Memanfaatkan rumpon:</strong> pasang di kedalaman 20â€“50 m, catat koordinat.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Suhu ideal:</strong> ikan tongkol, cakalang suka 28â€“30Â°C.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Pengaruh arus dan front:</strong> pertemuan arus dingin-hangat kaya plankton.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Fase bulan:</strong> bulan baru (gelap) ikan naik ke permukaan.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Ekolokasi sederhana:</strong> fish finder atau coba pancing di beberapa kedalaman.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Struktur bawah air:</strong> karang, palung, mulut sungai adalah hotspot ikan.</li>
                        </ul>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon-wrapper"><i class="fas fa-cloud-rain"></i></div>
                        <h3>Membaca Cuaca & Gelombang</h3>
                        <ul class="tip-list">
                            <li><i class="fas fa-check-circle"></i> <strong>Tinggi gelombang:</strong> 0â€“0,5 m (tenang), 0,5â€“1,25 m (sedang), 1,25â€“2 m (tinggi). Nelayan kecil sebaiknya tidak melaut jika >1,5 m.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Angin musim:</strong> barat (Desâ€“Feb) hujan, timur (Junâ€“Agu) kencang.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Tanda alam cuaca buruk:</strong> langit gelap tiba-tiba, angin kencang dingin, ombak tidak beraturan.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Arus pecah (rip current):</strong> gelombang tidak pecah di suatu jalur â€“ hindari.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Kabut tebal:</strong> kurangi kecepatan, gunakan kompas dan GPS.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Badai petir:</strong> segera kembali, hindari tiang logam.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Peringatan dini:</strong> pantau BMKG, radio maritim, awan kumulonimbus.</li>
                        </ul>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon-wrapper"><i class="fas fa-ship"></i></div>
                        <h3>Perawatan Kapal & Mesin</h3>
                        <ul class="tip-list">
                            <li><i class="fas fa-check-circle"></i> <strong>Bersihkan lambung (hulling):</strong> setiap 3 bulan â€“ hemat bahan bakar hingga 20%.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Perawatan mesin:</strong> ganti oli 100 jam, bersihkan filter solar, periksa busi, pastikan pendingin lancar.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Bahan bakar:</strong> isi 2/3 tangki, bawa cadangan jerigen aman.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Suku cadang wajib:</strong> baling-baling cadangan, kopling, tali, pompa air, tool kit.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Lampu navigasi:</strong> periksa lampu merkah, bawa bohlam cadangan.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Lumasi bagian bergerak:</strong> beri gemuk pada bantalan poros baling-baling setiap 50 jam.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Periksa anoda korban (zinc anode):</strong> ganti jika keropos.</li>
                        </ul>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon-wrapper"><i class="fas fa-compass"></i></div>
                        <h3>Navigasi Sederhana</h3>
                        <ul class="tip-list">
                            <li><i class="fas fa-check-circle"></i> <strong>Mengenal tanda darat:</strong> hafalkan gunung, tanjung, pohon besar.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Kompas dan GPS:</strong> selalu bawa kompas cadangan, tandai titik potensial.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Mata angin sederhana:</strong> matahari terbit = timur, terbenam = barat. Malam hari rasi bintang pari (Crux) menunjukkan selatan.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Jika tersesat:</strong> ikuti arah pantai, jangan panik.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Mengukur kedalaman:</strong> tali pemberat atau fish finder.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Peta laut sederhana:</strong> pelajari kontur kedalaman dan bahaya.</li>
                        </ul>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon-wrapper"><i class="fas fa-leaf"></i></div>
                        <h3>Konservasi Laut</h3>
                        <ul class="tip-list">
                            <li><i class="fas fa-check-circle"></i> <strong>Larang alat destruktif:</strong> bom ikan, potasium, pukat harimau. Gunakan pancing, jaring insang mata >2,5 inci.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Ukuran layak tangkap:</strong> jangan tangkap ikan di bawah ukuran dewasa.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Kelola sampah:</strong> bawa kembali sampah plastik ke darat.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Hormati kawasan konservasi:</strong> hindari zona larang tangkap.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Bycatch handling:</strong> lepaskan penyu, lumba-lumba dengan hati-hati.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Gunakan alat ramah lingkungan:</strong> pancing ulur, bubu, rawai.</li>
                            <li><i class="fas fa-check-circle"></i> <strong>Edukasi sesama:</strong> ajak nelayan lain menjaga laut.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- MATERI EDUKASI & TUTORIAL (tetap) -->
            <section class="edu-section">
                <div class="section-header">
                    <h2><i class="fas fa-graduation-cap"></i> Materi Edukasi & Tutorial</h2>
                    <p class="section-subtitle">Penangkapan ikan yang cerdas, aman, dan ramah lingkungan</p>
                </div>
                <div class="edu-grid">
                    <div class="edu-card">
                        <h3><i class="fas fa-fish"></i> Teknik Penangkapan Ikan Ramah Lingkungan</h3>
                        <ul class="edu-list">
                            <li><i class="fas fa-angle-right"></i> <strong>Pancing ulur (handline):</strong> gunakan umpan hidup atau buatan, turunkan hingga kedalaman target.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Rawai (longline):</strong> rentangkan tali utama dengan puluhan pancing.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Bubu (fish trap):</strong> tempatkan di dasar dekat karang atau rumpon.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Jaring insang (gillnet):</strong> pasang melintang arus, ukuran mata jaring disesuaikan target.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Penggunaan rumpon:</strong> buat dari bambu dan sabut kelapa, pasang di kedalaman 30-50 m.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Hindari:</strong> pukat harimau, bom, potasium.</li>
                        </ul>
                    </div>
                    <div class="edu-card">
                        <h3><i class="fas fa-hard-hat"></i> Keselamatan Kerja di Atas Kapal</h3>
                        <ul class="edu-list">
                            <li><i class="fas fa-angle-right"></i> <strong>Peralatan keselamatan:</strong> life jacket untuk setiap ABK, pelampung cincin.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Pencegahan kebakaran:</strong> sediakan APAR di ruang mesin.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Pertolongan pertama:</strong> kotak P3K lengkap.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Manuver darurat:</strong> semua awak tahu cara operasikan radio, lampu tanda bahaya.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Latihan rutin:</strong> simulasi orang jatuh ke laut setiap 3 bulan.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Kesehatan:</strong> hindari kelelahan, atur jadwal istirahat.</li>
                        </ul>
                    </div>
                    <div class="edu-card">
                        <h3><i class="fas fa-sun-o"></i> Cara Membaca Tanda Alam</h3>
                        <ul class="edu-list">
                            <li><i class="fas fa-angle-right"></i> <strong>Awan Cumulonimbus:</strong> menjulang tinggi â€“ pertanda badai, segera ke pantai.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Angin kencang tiba-tiba:</strong> biasanya sebelum hujan deras.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Burung laut:</strong> jika banyak berputar dan menyelam, ada ikan.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Warna air:</strong> hijau kebiruan menandakan plankton.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Ombak pecah di laut dalam:</strong> menandakan gosong atau karang â€“ hindari.</li>
                        </ul>
                    </div>
                    <div class="edu-card">
                        <h3><i class="fas fa-tools"></i> Perawatan Rutin Mesin Kapal</h3>
                        <ul class="edu-list">
                            <li><i class="fas fa-angle-right"></i> <strong>Setiap 50 jam:</strong> periksa oli, saringan bahan bakar, air pendingin.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Setiap 100 jam:</strong> ganti oli, filter oli, periksa busi.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Setiap 300 jam:</strong> periksa injektor, setel katup, bersihkan tangki bahan bakar.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Musim hujan:</strong> lebih sering periksa karena air bisa masuk ke bahan bakar.</li>
                            <li><i class="fas fa-angle-right"></i> <strong>Sebelum melaut:</strong> cek putaran mesin, pastikan tidak ada suara aneh.</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- AGENDA NELAYAN (tetap) -->
            <section class="agenda-section">
                <div class="section-header">
                    <h2><i class="fas fa-calendar-check"></i> Agenda Nelayan</h2>
                    <p class="section-subtitle">Catat jadwal melaut, perawatan kapal, atau kegiatan kelompok â€“ dapatkan notifikasi pengingat</p>
                </div>
                <div class="agenda-container">
                    <!-- Form Tambah/Edit Agenda -->
                    <div class="agenda-form">
                        <h3 id="agendaFormTitle">Tambah Agenda</h3>
                        <div class="form-group">
                            <label>Judul Kegiatan</label>
                            <input type="text" id="agendaTitle" placeholder="Contoh: Perbaikan mesin, Melaut, Rapat kelompok...">
                        </div>
                        <div class="form-group">
                            <label>Tanggal & Waktu</label>
                            <input type="datetime-local" id="agendaDateTime">
                        </div>
                        <div class="form-group">
                            <label>Deskripsi (opsional)</label>
                            <textarea id="agendaDesc" rows="3" placeholder="Detail kegiatan..."></textarea>
                        </div>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn-agenda" id="addAgendaBtn" style="flex:2;"><i class="fas fa-plus-circle"></i> <span>Simpan Agenda</span></button>
                            <button class="btn-agenda" id="cancelEditBtn" style="background: #6c757d; flex:1; display: none;" onclick="cancelEdit()"><i class="fas fa-times"></i> Batal</button>
                        </div>
                    </div>
                    <!-- Daftar Agenda -->
                    <div class="agenda-list">
                        <h3>Agenda Mendatang</h3>
                        <div id="agendaItems"></div>
                        <p id="noAgenda" style="color: var(--text-light); text-align: center; padding: 20px;">Belum ada agenda. Tambahkan sekarang!</p>
                    </div>
                </div>
            </section>

            <!-- PETA NELAYAN (tetap) -->
            <section class="map-section">
                <div class="section-header">
                    <h2><i class="fas fa-map-marked-alt"></i> Peta Nelayan & Titik Penting</h2>
                    <p class="section-subtitle">Klik pada peta untuk menambah marker. Klik marker untuk opsi jadikan titik awal/tujuan.</p>
                </div>
                <div class="map-controls">
                    <input type="text" id="startLat" placeholder="Latitude Awal (contoh: -7.7)" value="-7.7">
                    <input type="text" id="startLon" placeholder="Longitude Awal (contoh: 114.0)" value="114.0">
                    <input type="text" id="endLat" placeholder="Latitude Tujuan" value="-7.8">
                    <input type="text" id="endLon" placeholder="Longitude Tujuan" value="114.1">
                    <button id="routeBtn" class="btn-map-success"><i class="fas fa-route"></i> Tampilkan Rute</button>
                    <button id="myLocationBtn" class="btn-map-success"><i class="fas fa-location-dot"></i> ğŸ“ Lokasi Saya</button>
                    <button id="setStartLocationBtn" class="btn-map-warning"><i class="fas fa-map-pin"></i> ğŸ“ Saya sbg Awal</button>
                    <button id="setEndLocationBtn" class="btn-map-warning"><i class="fas fa-map-pin"></i> ğŸ“ Saya sbg Tujuan</button>
                    <button id="checkRouteToDestinationBtn" class="btn-map-success"><i class="fas fa-search-location"></i> ğŸ” Cek Posisi & Rute ke Tujuan</button>
                    <button id="clearMarkersBtn" class="btn-map-danger"><i class="fas fa-trash-alt"></i> Hapus Semua Marker</button>
                </div>
                <div class="map-container">
                    <div id="map"></div>
                </div>
                <div id="routeInfo" class="route-info"></div>
                <p style="text-align: center; margin-top: 15px; color: var(--text-light);">
                    <i class="fas fa-info-circle"></i> Klik marker untuk melihat opsi jadikan titik awal atau tujuan.
                </p>
            </section>

            <!-- PRAKIRAAN GELOMBANG BMKG (dengan info login dan tautan diperbaiki) -->
            <div class="card">
                <div class="card-header">
                    <h3><i class="fas fa-map-marked-alt"></i> Prakiraan Gelombang BMKG</h3>
                    <span class="badge"><i class="fas fa-check-circle"></i> Resmi</span>
                </div>
                <div class="iframe-container">
                    <iframe src="https://maritim.bmkg.go.id/inawis" title="BMKG Indonesia-Weather Information For Shipping" loading="lazy" sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation"></iframe>
                </div>
                <!-- Informasi login BMKG (tambahan) -->
                <div style="text-align: center; margin: 20px 0 10px; background: rgba(255,255,240,0.9); padding: 15px; border-radius: 40px; border: 1px solid var(--accent-orange);">
                    <p><i class="fas fa-key"></i> <strong>Login BMKG INA-WIS:</strong> username <code>bmkg021</code> & password <code>bmkguser2019</code></p>
                </div>
                <div class="fallback-link" style="text-align:center; margin-top:24px;">
                    <a href="https://maritim.bmkg.go.id/inawis" target="_blank" class="btn">
                        <i class="fas fa-external-link-alt"></i> Buka Halaman BMKG
                    </a>
                </div>
            </div>

            <footer class="footer">
                <p><i class="far fa-copyright"></i> 2025 SIMPEL MARITIM â€“ Dinas Peternakan Dan Perikanan Situbondo</p>
                <p>Data real-time: Open-Meteo | Fase bulan: perhitungan internal | Prakiraan gelombang: BMKG | Peta: OpenStreetMap</p>
            </footer>
        </div>
    </div>

    <!-- FLOATING NOTIFICATION (tetap) -->
    <div class="floating-notification" id="floatingNotif" style="display: none;">
        <div class="notif-header">
            <i class="fas fa-bullhorn"></i>
            <h4>Informasi Cuaca Terkini Jawa Timur</h4>
        </div>
        <p>
            <strong>ğŸ“¢ Perhatian Nelayan!</strong><br>
            Pantau kondisi cuaca terkini di wilayah Jawa Timur melalui layanan resmi BMKG (nowcasting). Informasi ini penting untuk keselamatan anda dan keluarga sebelum berlayar.
        </p>
        <div class="notif-actions">
            <button class="notif-btn notif-btn-secondary" id="notifTidak"><i class="fas fa-times"></i> Tidak</button>
            <button class="notif-btn notif-btn-primary" id="notifIya"><i class="fas fa-external-link-alt"></i> Lihat Sekarang</button>
        </div>
    </div>

    <!-- Leaflet JS & Routing Machine -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <!-- JavaScript Eksternal -->
    <script src="main.js"></script>
</body>
</html>

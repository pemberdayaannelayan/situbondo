<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Peraturan Kementerian Kelautan dan Perikanan - Dinas Perikanan Situbondo</title>
    <meta name="description" content="Kumpulan lengkap peraturan Kementerian Kelautan dan Perikanan (KKP) - Download PDF semua peraturan terkait perikanan dan kelautan.">
    <meta name="keywords" content="Peraturan KKP, Peraturan Perikanan, Hukum Kelautan, Aturan Nelayan, Kementerian Kelautan dan Perikanan, Download PDF">
    <meta name="author" content="Dinas Perikanan Situbondo">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#0284c7">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.dinasperikanansitubondo.com/peraturankkp">
    <meta property="og:title" content="Peraturan KKP - Dinas Perikanan Situbondo">
    <meta property="og:description" content="Akses dan download peraturan Kementerian Kelautan dan Perikanan dalam format PDF.">
    <meta property="og:image" content="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/peraturan.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Library untuk PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            --primary: #0284c7;
            --primary-dark: #0c4a6e;
            --secondary: #38bdf8;
            --accent: #f59e0b;
            --accent-dark: #d97706;
            --light-bg: #f0f9ff;
            --white: #ffffff;
            --text-main: #0f172a;
            --text-sub: #475569;
            --font-head: 'Outfit', sans-serif;
            --font-body: 'Plus Jakarta Sans', sans-serif;
        }

        body {
            font-family: var(--font-body);
            color: var(--text-sub);
            background-color: var(--light-bg);
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, .navbar-brand {
            font-family: var(--font-head);
            color: var(--text-main);
        }

        .navbar {
            padding: 10px 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .navbar-brand img.logo-kkp {
            height: 40px;
            width: auto;
        }

        .navbar-brand img.logo-kabupaten {
            height: 55px;
            width: auto;
            object-fit: contain;
        }

        .brand-text h5 {
            font-weight: 800;
            margin: 0;
            line-height: 1;
            color: var(--primary-dark);
            letter-spacing: -0.5px;
            font-size: 1.1rem;
        }
        .brand-text span {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--primary);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .nav-link {
            font-weight: 600;
            color: var(--text-main) !important;
            margin: 0 8px;
            position: relative;
            transition: 0.3s;
            font-size: 0.95rem;
        }

        .nav-link:hover {
            color: var(--primary) !important;
        }

        .nav-link.active {
            color: var(--primary) !important;
            font-weight: 700;
        }

        .btn-cta {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(2, 132, 199, 0.3);
            transition: 0.3s;
            font-size: 0.95rem;
        }
        
        .btn-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(2, 132, 199, 0.4);
            color: white;
        }

        /* Hero Section */
        .hero-section {
            min-height: 70vh;
            background: linear-gradient(135deg, rgba(2, 132, 199, 0.1) 0%, rgba(12, 74, 110, 0.05) 100%);
            position: relative;
            display: flex;
            align-items: center;
            padding-top: 120px;
            padding-bottom: 80px;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-badge {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            border: 1px solid var(--primary);
            color: var(--primary-dark);
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            font-size: 0.9rem;
        }

        /* Peraturan Section */
        .peraturan-section {
            padding: 80px 0;
            background-color: white;
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-header h2 {
            font-weight: 800;
            color: var(--primary-dark);
            font-size: 2.5rem;
        }

        .peraturan-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(2, 132, 199, 0.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            height: 100%;
        }

        .peraturan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(2, 132, 199, 0.15);
            border-color: var(--primary);
        }

        .peraturan-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--primary);
        }

        .peraturan-number {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .peraturan-title {
            color: var(--primary-dark);
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 1.1rem;
            line-height: 1.4;
        }

        .peraturan-desc {
            color: var(--text-sub);
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .peraturan-meta {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .peraturan-meta span {
            background: var(--light-bg);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-sub);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-download {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            text-decoration: none;
            cursor: pointer;
            font-size: 0.9rem;
            width: 100%;
            justify-content: center;
        }

        .btn-download:hover {
            background: var(--accent-dark);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
        }

        .btn-download i {
            font-size: 1rem;
        }

        .filter-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .filter-btn {
            background: var(--light-bg);
            border: 1px solid #e2e8f0;
            color: var(--text-sub);
            padding: 8px 18px;
            border-radius: 20px;
            margin-right: 8px;
            margin-bottom: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .search-box {
            position: relative;
            margin-bottom: 25px;
        }

        .search-box input {
            padding: 12px 20px 12px 45px;
            border-radius: 25px;
            border: 2px solid #e2e8f0;
            width: 100%;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(2, 132, 199, 0.1);
            outline: none;
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-sub);
        }

        /* Modal untuk preview PDF */
        .modal-peraturan {
            font-family: 'Times New Roman', serif;
            line-height: 1.6;
            padding: 20px;
        }

        .modal-kop {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #000;
            padding-bottom: 20px;
        }

        .modal-kop img {
            height: 80px;
        }

        .modal-kop h3 {
            font-weight: bold;
            margin: 15px 0;
            font-size: 1.4rem;
        }

        .modal-kop h4 {
            margin: 10px 0;
            font-size: 1.2rem;
        }

        .modal-content {
            font-size: 14px;
            text-align: justify;
        }

        .modal-bab {
            font-weight: bold;
            text-align: center;
            margin: 25px 0 15px 0;
            font-size: 1.1rem;
        }

        .modal-pasal {
            margin-bottom: 20px;
            page-break-inside: avoid;
        }

        .modal-pasal-title {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        /* PDF Container Tersembunyi */
        .pdf-container {
            position: absolute;
            left: -9999px;
            top: -9999px;
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            background: white;
            font-family: 'Times New Roman', serif;
            font-size: 12pt;
            line-height: 1.6;
            box-sizing: border-box;
        }

        .pdf-kop {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #000;
            padding-bottom: 20px;
            page-break-inside: avoid;
        }

        .pdf-kop img {
            height: 80px;
            margin-bottom: 15px;
        }

        .pdf-kop h3 {
            font-weight: bold;
            font-size: 14pt;
            margin: 10px 0;
            line-height: 1.3;
        }

        .pdf-kop h4 {
            font-size: 12pt;
            margin: 8px 0;
            line-height: 1.3;
        }

        .pdf-content {
            text-align: justify;
            font-size: 11pt;
        }

        .pdf-bab {
            font-weight: bold;
            text-align: center;
            margin: 25px 0 15px 0;
            font-size: 12pt;
            page-break-inside: avoid;
        }

        .pdf-pasal {
            margin-bottom: 15px;
            page-break-inside: avoid;
        }

        .pdf-pasal-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 11pt;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 9999;
            font-family: var(--font-body);
            font-weight: 600;
            animation: slideIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 400px;
        }

        .notification i {
            font-size: 1.2rem;
        }

        .notification.success {
            background: #10b981;
        }

        .notification.warning {
            background: #f59e0b;
        }

        .notification.error {
            background: #ef4444;
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            flex-direction: column;
            gap: 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--light-bg);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Footer */
        footer {
            background-color: var(--primary-dark);
            color: #cbd5e1;
            padding-top: 0;
            position: relative;
            margin-top: 50px;
        }

        .footer-wave {
            line-height: 0;
            width: 100%;
            background-color: white;
        }
        .footer-wave svg {
            display: block;
            width: 100%;
            height: 60px;
            fill: var(--primary-dark);
        }

        .footer-content {
            padding: 60px 0 40px;
        }

        footer h5 {
            color: white;
            font-weight: 700;
            margin-bottom: 25px;
            position: relative;
            display: inline-block;
            font-size: 1.2rem;
        }

        footer h5::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -8px;
            width: 40px;
            height: 3px;
            background-color: var(--accent);
            border-radius: 2px;
        }

        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .footer-links a:hover {
            color: var(--secondary);
            padding-left: 5px;
        }

        .contact-item {
            display: flex;
            align-items: start;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .contact-icon {
            background: rgba(255,255,255,0.1);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            flex-shrink: 0;
        }

        .copyright {
            background-color: rgba(0,0,0,0.2);
            padding: 20px 0;
            text-align: center;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-section {
                padding-top: 100px;
                text-align: center;
                min-height: 60vh;
            }
            
            .filter-btn {
                padding: 6px 15px;
                font-size: 0.85rem;
                margin-right: 5px;
                margin-bottom: 5px;
            }
            
            .peraturan-card {
                padding: 20px;
            }
            
            .peraturan-meta {
                flex-direction: column;
                gap: 8px;
            }
            
            .modal-kop img {
                height: 60px;
            }
            
            .navbar-brand img.logo-kkp {
                height: 35px;
            }
            
            .navbar-brand img.logo-kabupaten {
                height: 45px;
            }
            
            .brand-text h5 {
                font-size: 1rem;
            }
        }

        @media (max-width: 576px) {
            .hero-section {
                padding-top: 100px;
                padding-bottom: 50px;
            }
            
            .display-4 {
                font-size: 2.2rem;
            }
            
            .section-header h2 {
                font-size: 2rem;
            }
            
            .nav-link {
                font-size: 0.9rem;
                margin: 0 5px;
            }
            
            .btn-cta {
                padding: 8px 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-3" href="https://www.dinasperikanansitubondo.com">
                <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/LOGO%20KABUPATEN%20SITUBONDO.png" 
                     alt="Logo Pemerintah Kabupaten Situbondo" class="logo-kabupaten">
                <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/logo%20kkp.png" 
                     alt="Logo KKP" class="logo-kkp">
                <div class="brand-text d-flex flex-column">
                    <h5>DINAS PERIKANAN</h5>
                    <span>KAB. SITUBONDO</span>
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav align-items-center gap-2">
                    <li class="nav-item"><a class="nav-link" href="https://www.dinasperikanansitubondo.com">Beranda</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://www.dinasperikanansitubondo.com#layanan">Layanan</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://www.dinasperikanansitubondo.com/simata" target="_blank">SIMATA</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://www.dinasperikanansitubondo.com/kegiatan/">Dokumentasi</a></li>
                    <li class="nav-item"><a class="nav-link active" href="https://www.dinasperikanansitubondo.com/peraturankkp">Peraturan KKP</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://www.dinasperikanansitubondo.com#aduan">Pengaduan</a></li>
                    <li class="nav-item ms-lg-2">
                        <a href="https://www.dinasperikanansitubondo.com#aduan" class="btn btn-cta">Hubungi Kami</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <div class="container hero-content">
            <div class="row align-items-center">
                <div class="col-lg-8" data-aos="fade-right">
                    <div class="hero-badge text-nowrap">
                        <i class="fas fa-gavel"></i> <span>Database Regulasi Resmi</span>
                    </div>
                    
                    <h1 class="display-4 fw-bold mb-4" style="color: var(--text-main);">
                        Peraturan Kementerian Kelautan dan Perikanan
                    </h1>
                    
                    <p class="lead mb-5" style="color: var(--text-sub); font-weight: 500;">
                        Akses lengkap semua peraturan, kebijakan, dan undang-undang terkait sektor kelautan dan perikanan yang diterbitkan oleh Kementerian Kelautan dan Perikanan Republik Indonesia. Generate dan download dalam format PDF resmi.
                    </p>
                    
                    <div class="d-flex flex-wrap gap-3">
                        <a href="#peraturan-list" class="btn btn-cta px-4 py-3 shadow">Lihat Semua Peraturan</a>
                        <a href="#download" class="btn btn-outline-primary px-4 py-3 rounded-pill fw-bold" style="border-width: 2px;">Download Koleksi Lengkap</a>
                    </div>
                </div>
                <div class="col-lg-4" data-aos="fade-left">
                    <div class="text-center">
                        <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/peraturan.png" 
                             alt="Ilustrasi Peraturan KKP" class="img-fluid" style="max-height: 300px; border-radius: 15px;">
                        <p class="text-muted mt-3"><small>Sumber resmi: Kementerian Kelautan dan Perikanan RI</small></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="peraturan-section" id="peraturan-list">
        <div class="container">
            <div class="section-header" data-aos="fade-up">
                <span class="text-primary fw-bold text-uppercase" style="letter-spacing: 2px;">Kumpulan Peraturan</span>
                <h2 class="display-6 mt-2">Database Peraturan KKP</h2>
                <div style="width: 80px; height: 4px; background: var(--accent); margin: 15px auto; border-radius: 2px;"></div>
                <p class="text-muted col-lg-8 mx-auto">Temukan dan generate peraturan terkini yang berlaku di sektor kelautan dan perikanan dalam format PDF resmi.</p>
            </div>

            <!-- Search and Filter -->
            <div class="filter-section" data-aos="fade-up">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Cari peraturan berdasarkan judul, nomor, tahun, atau kategori...">
                </div>
                
                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <strong class="d-block mb-3"><i class="fas fa-filter me-2"></i>Filter Berdasarkan Tahun:</strong>
                        <div id="filterButtons">
                            <button class="filter-btn active" data-filter="all">Semua Tahun</button>
                            <button class="filter-btn" data-filter="2023">2023</button>
                            <button class="filter-btn" data-filter="2022">2022</button>
                            <button class="filter-btn" data-filter="2021">2021</button>
                            <button class="filter-btn" data-filter="2020">2020</button>
                            <button class="filter-btn" data-filter="2019">2019</button>
                            <button class="filter-btn" data-filter="2018">2018</button>
                        </div>
                    </div>
                    
                    <div class="col-lg-6 mb-4">
                        <strong class="d-block mb-3"><i class="fas fa-tags me-2"></i>Filter Berdasarkan Kategori:</strong>
                        <div>
                            <button class="filter-btn active" data-category="semua">Semua Kategori</button>
                            <button class="filter-btn" data-category="perikanan">Perikanan Tangkap</button>
                            <button class="filter-btn" data-category="budidaya">Budidaya Perikanan</button>
                            <button class="filter-btn" data-category="pengelolaan">Pengelolaan Sumber Daya</button>
                            <button class="filter-btn" data-category="kapal">Kapal dan Alat Tangkap</button>
                            <button class="filter-btn" data-category="pelabuhan">Pelabuhan Perikanan</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Peraturan List -->
            <div class="row" id="peraturanContainer">
                <!-- Peraturan akan dimuat di sini -->
            </div>

            <!-- Download All Section -->
            <div class="text-center mt-5 pt-5" id="download" data-aos="fade-up">
                <div class="card border-0 shadow-sm" style="background: var(--light-bg);">
                    <div class="card-body py-5">
                        <h3 class="mb-4">Download Koleksi Lengkap</h3>
                        <p class="text-muted mb-4">Dapatkan semua 9 peraturan KKP dalam format PDF resmi dengan tampilan standar pemerintah.</p>
                        <button class="btn btn-cta px-5 py-3" onclick="generateAllPDFs()">
                            <i class="fas fa-download me-2"></i> Generate Semua Peraturan (9 PDF)
                        </button>
                        <div class="mt-4">
                            <small class="text-muted d-block">
                                <i class="fas fa-info-circle me-2"></i>Masing-masing peraturan akan diunduh sebagai file PDF terpisah
                            </small>
                            <small class="text-muted d-block mt-1">
                                <i class="fas fa-clock me-2"></i>Proses membutuhkan waktu sekitar 30-60 detik
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal untuk Preview Peraturan -->
    <div class="modal fade" id="peraturanModal" tabindex="-1" aria-labelledby="peraturanModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="peraturanModalLabel">Preview Peraturan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body modal-peraturan" id="modalPeraturanContent">
                    <!-- Konten peraturan akan dimuat di sini -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    <button type="button" class="btn btn-primary" id="modalDownloadBtn">
                        <i class="fas fa-download me-2"></i>Download PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Container tersembunyi untuk PDF generation -->
    <div id="pdfContainer" class="pdf-container"></div>

    <footer>
        <div class="footer-wave">
            <svg viewBox="0 0 1440 320" preserveAspectRatio="none">
                <path fill-opacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
            </svg>
        </div>

        <div class="container footer-content">
            <div class="row gy-5">
                <div class="col-lg-5 col-md-12">
                    <div class="d-flex align-items-center gap-3 mb-4">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/logo%20kkp.png" 
                                 alt="Logo KKP" style="height: 50px;">
                            <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/LOGO%20KABUPATEN%20SITUBONDO.png" 
                                 alt="Logo Situbondo" style="height: 60px;">
                        </div>
                        <div>
                            <h4 class="text-white mb-0 fw-bold">DINAS PERIKANAN</h4>
                            <small class="text-white-50" style="letter-spacing: 2px;">KABUPATEN SITUBONDO</small>
                        </div>
                    </div>
                    <p class="pe-lg-5" style="line-height: 1.8;">
                        Berkomitmen untuk memajukan sektor perikanan tangkap dan memberdayakan masyarakat pesisir melalui pelayanan yang transparan, akuntabel, dan inovatif.
                    </p>
                    <div class="d-flex gap-2 mt-4">
                        <a href="#" class="btn btn-outline-light rounded-circle" style="width: 40px; height: 40px; display:flex; align-items:center; justify-content:center;">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="btn btn-outline-light rounded-circle" style="width: 40px; height: 40px; display:flex; align-items:center; justify-content:center;">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.dinasperikanansitubondo.com" class="btn btn-outline-light rounded-circle" style="width: 40px; height: 40px; display:flex; align-items:center; justify-content:center;">
                            <i class="fas fa-globe"></i>
                        </a>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6">
                    <h5>Tautan Cepat</h5>
                    <ul class="list-unstyled footer-links mt-3">
                        <li><a href="https://www.dinasperikanansitubondo.com"><i class="fas fa-chevron-right fa-xs"></i> Beranda</a></li>
                        <li><a href="https://www.dinasperikanansitubondo.com#layanan"><i class="fas fa-chevron-right fa-xs"></i> Layanan Kami</a></li>
                        <li><a href="https://www.dinasperikanansitubondo.com/simata" target="_blank"><i class="fas fa-chevron-right fa-xs"></i> SIMATA</a></li>
                        <li><a href="https://www.dinasperikanansitubondo.com/kegiatan/"><i class="fas fa-chevron-right fa-xs"></i> Dokumentasi Kegiatan</a></li>
                        <li><a href="https://www.dinasperikanansitubondo.com/peraturankkp"><i class="fas fa-chevron-right fa-xs"></i> Peraturan KKP</a></li>
                        <li><a href="https://situbondokab.go.id/" target="_blank"><i class="fas fa-chevron-right fa-xs"></i> Pemkab Situbondo</a></li>
                    </ul>
                </div>

                <div class="col-lg-4 col-md-6">
                    <h5>Kontak Kami</h5>
                    <div class="mt-3">
                        <div class="contact-item">
                            <div class="contact-icon"><i class="fas fa-map-marker-alt"></i></div>
                            <div>
                                <span class="d-block text-white fw-bold">Alamat Kantor</span>
                                <small>Jl. PB Sudirman No.77 C, Situbondo, Jawa Timur 68312</small>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon"><i class="fas fa-phone-alt"></i></div>
                            <div>
                                <span class="d-block text-white fw-bold">Telepon / WhatsApp</span>
                                <small>0878-6561-4222</small>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon"><i class="fas fa-clock"></i></div>
                            <div>
                                <span class="d-block text-white fw-bold">Jam Pelayanan</span>
                                <small>Senin - Jumat: 08.00 - 15.00 WIB</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 text-md-start mb-2 mb-md-0">
                        &copy; 2025 <strong>Dinas Perikanan Situbondo</strong>. All Rights Reserved.
                    </div>
                    <div class="col-md-6 text-md-end">
                        <small class="text-white-50">Bidang Pemberdayaan Nelayan - Database Peraturan KKP</small>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <script>
        // ==================== KONFIGURASI AWAL ====================
        const { jsPDF } = window.jspdf;
        AOS.init({ once: true, offset: 100, duration: 800 });
        
        // Data peraturan lengkap
        const peraturanData = {
            1: {
                number: "1/PERMEN-KP/2023",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 1 TAHUN 2023",
                subtitle: "TENTANG PENGELOLAAN PERIKANAN TANGKAP DI WILAYAH PENGELOLAAN PERIKANAN NEGARA REPUBLIK INDONESIA",
                category: "perikanan",
                year: "2023",
                pages: "45",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa untuk mengoptimalkan pemanfaatan sumber daya ikan secara berkelanjutan di Wilayah Pengelolaan Perikanan Negara Republik Indonesia, perlu dilakukan pengelolaan perikanan tangkap yang terpadu dan terintegrasi;</p>
                    <p>b. bahwa berdasarkan pertimbangan sebagaimana dimaksud dalam huruf a, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Pengelolaan Perikanan Tangkap di Wilayah Pengelolaan Perikanan Negara Republik Indonesia;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan (Lembaran Negara Republik Indonesia Tahun 2004 Nomor 118, Tambahan Lembaran Negara Republik Indonesia Nomor 4433);</p>
                    <p>2. Peraturan Pemerintah Nomor 11 Tahun 2023 tentang Pengelolaan Perikanan;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG PENGELOLAAN PERIKANAN TANGKAP DI WILAYAH PENGELOLAAN PERIKANAN NEGARA REPUBLIK INDONESIA.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Perikanan tangkap adalah semua kegiatan yang berhubungan dengan penangkapan ikan termasuk kegiatan penangkapan, pendaratan, pengangkutan, penyimpanan, dan pengolahan ikan.</p>
                        <p>2. Wilayah Pengelolaan Perikanan Negara Republik Indonesia yang selanjutnya disebut WPPNRI adalah wilayah pengelolaan perikanan Republik Indonesia untuk penangkapan ikan dan/atau pembudidayaan ikan.</p>
                        <p>3. Sumber daya ikan adalah potensi semua jenis ikan termasuk biota perairan lainnya.</p>
                    </div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>Pengelolaan perikanan tangkap di WPPNRI bertujuan untuk:</p>
                        <p>a. menjamin kelestarian sumber daya ikan;</p>
                        <p>b. meningkatkan kesejahteraan masyarakat nelayan;</p>
                        <p>c. meningkatkan kontribusi sektor perikanan terhadap perekonomian nasional.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>PENGELOLAAN PERIKANAN TANGKAP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>(1) Pengelolaan perikanan tangkap dilakukan melalui pendekatan ekosistem.</p>
                        <p>(2) Pengelolaan sebagaimana dimaksud pada ayat (1) meliputi perencanaan, pemanfaatan, pengendalian, dan pengawasan.</p>
                    </div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 4</div>
                        <p>Setiap orang yang melakukan penangkapan ikan di WPPNRI wajib memiliki izin penangkapan ikan yang diterbitkan oleh Menteri.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 5</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 15 Januari 2023<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SAKTI WAHYU TRENGGONO</strong>
                    </p>
                `
            },
            2: {
                number: "5/PERMEN-KP/2022",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 5 TAHUN 2022",
                subtitle: "TENTANG TATA CARA PENERBITAN SURAT IZIN PENANGKAPAN IKAN DAN SURAT IZIN KAPAL PENGANGKUT IKAN",
                category: "budidaya",
                year: "2022",
                pages: "32",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa untuk melaksanakan ketentuan Pasal 27 ayat (2) Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan, perlu menetapkan tata cara penerbitan Surat Izin Penangkapan Ikan dan Surat Izin Kapal Pengangkut Ikan;</p>
                    <p>b. bahwa berdasarkan pertimbangan sebagaimana dimaksud dalam huruf a, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Tata Cara Penerbitan Surat Izin Penangkapan Ikan dan Surat Izin Kapal Pengangkut Ikan;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    <p>2. Peraturan Pemerintah Nomor 11 Tahun 2023 tentang Pengelolaan Perikanan;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG TATA CARA PENERBITAN SURAT IZIN PENANGKAPAN IKAN DAN SURAT IZIN KAPAL PENGANGKUT IKAN.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Surat Izin Penangkapan Ikan yang selanjutnya disebut SIPI adalah izin yang diberikan kepada kapal perikanan untuk melakukan penangkapan ikan di wilayah perairan Indonesia dan/atau Zona Ekonomi Eksklusif Indonesia.</p>
                        <p>2. Surat Izin Kapal Pengangkut Ikan yang selanjutnya disebut SIKPI adalah izin yang diberikan kepada kapal pengangkut ikan untuk mengangkut ikan hasil tangkapan.</p>
                        <p>3. Kapal perikanan adalah kapal, perahu, atau alat apung lain yang digunakan untuk melakukan penangkapan ikan, termasuk kapal yang digunakan untuk melakukan penelitian perikanan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>TATA CARA PENERBITAN SIPI DAN SIKPI</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>(1) Permohonan SIPI diajukan secara tertulis kepada Menteri melalui Direktur Jenderal Perikanan Tangkap.</p>
                        <p>(2) Permohonan sebagaimana dimaksud pada ayat (1) dilampiri dengan:</p>
                        <p>a. fotokopi surat tanda pendaftaran kapal;</p>
                        <p>b. fotokopi sertifikat kelaikan kapal;</p>
                        <p>c. surat pernyataan kesanggupan mematuhi ketentuan peraturan perundang-undangan di bidang perikanan.</p>
                    </div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>(1) SIPI diberikan untuk jangka waktu paling lama 5 (lima) tahun.</p>
                        <p>(2) SIPI dapat diperpanjang untuk jangka waktu paling lama 5 (lima) tahun.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 4</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 20 Maret 2022<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SAKTI WAHYU TRENGGONO</strong>
                    </p>
                `
            },
            3: {
                number: "12/PERMEN-KP/2021",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 12 TAHUN 2021",
                subtitle: "TENTANG PELAKSANAAN KEGIATAN USAHA PERIKANAN TANGKAP DI LAUT LEPAS",
                category: "pengelolaan",
                year: "2021",
                pages: "28",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa kegiatan usaha perikanan tangkap di laut lepas perlu diatur untuk menjamin keberlanjutan sumber daya ikan dan kepentingan nasional;</p>
                    <p>b. bahwa berdasarkan pertimbangan sebagaimana dimaksud dalam huruf a, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Pelaksanaan Kegiatan Usaha Perikanan Tangkap di Laut Lepas;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    <p>2. Undang-Undang Nomor 32 Tahun 2014 tentang Kelautan;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG PELAKSANAAN KEGIATAN USAHA PERIKANAN TANGKAP DI LAUT LEPAS.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Laut lepas adalah semua bagian laut yang tidak termasuk dalam Zona Ekonomi Eksklusif, laut teritorial, perairan kepulauan, atau perairan pedalaman suatu negara.</p>
                        <p>2. Kapal perikanan Indonesia adalah kapal perikanan yang berbendera Indonesia.</p>
                        <p>3. Regional Fisheries Management Organization (RFMO) adalah organisasi pengelolaan perikanan regional.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>PERSYARATAN DAN KEWAJIBAN</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>(1) Kapal perikanan Indonesia yang melakukan penangkapan ikan di laut lepas wajib memiliki izin khusus penangkapan ikan di laut lepas.</p>
                        <p>(2) Izin khusus sebagaimana dimaksud pada ayat (1) diberikan oleh Menteri.</p>
                    </div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>Kapal perikanan Indonesia yang melakukan penangkapan ikan di laut lepas wajib:</p>
                        <p>a. mematuhi ketentuan RFMO setempat;</p>
                        <p>b. melaporkan hasil tangkapan kepada Menteri secara berkala;</p>
                        <p>c. memasang alat pemantau elektronik (VMS) pada kapal.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 4</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 15 Juli 2021<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SAKTI WAHYU TRENGGONO</strong>
                    </p>
                `
            },
            4: {
                number: "8/PERMEN-KP/2020",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 8 TAHUN 2020",
                subtitle: "TENTANG PENYELENGGARAAN PELABUHAN PERIKANAN",
                category: "kapal",
                year: "2020",
                pages: "52",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa pelabuhan perikanan berfungsi sebagai simpul utama dalam sistem bisnis perikanan tangkap yang perlu diselenggarakan secara efektif dan efisien;</p>
                    <p>b. bahwa untuk meningkatkan peran dan fungsi pelabuhan perikanan, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Penyelenggaraan Pelabuhan Perikanan;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    <p>2. Undang-Undang Nomor 17 Tahun 2008 tentang Pelayaran;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG PENYELENGGARAAN PELABUHAN PERIKANAN.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Pelabuhan perikanan adalah tempat yang terdiri dari daratan dan perairan di sekitarnya dengan batas-batas tertentu sebagai tempat kegiatan pemerintahan dan kegiatan sistem bisnis perikanan yang digunakan sebagai tempat kapal perikanan bersandar, berlabuh, dan/atau bongkar muat ikan yang dilengkapi dengan fasilitas keselamatan pelayaran dan kegiatan penunjang pelabuhan perikanan.</p>
                        <p>2. Unit Penyelenggara Pelabuhan Perikanan yang selanjutnya disebut UPPP adalah unit kerja di pelabuhan perikanan yang bertugas menyelenggarakan pelabuhan perikanan.</p>
                        <p>3. Tempat pendaratan ikan adalah tempat tertentu di pelabuhan perikanan yang digunakan untuk membongkar hasil tangkapan ikan dari kapal perikanan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>FUNGSI DAN KLASIFIKASI</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>Pelabuhan perikanan berfungsi sebagai:</p>
                        <p>a. tempat pendaratan ikan;</p>
                        <p>b. tempat pembinaan mutu hasil perikanan;</p>
                        <p>c. tempat pengumpulan data statistik perikanan;</p>
                        <p>d. tempat pelayanan administrasi perikanan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 10 April 2020<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>EDHY PRABOWO</strong>
                    </p>
                `
            },
            5: {
                number: "3/PERMEN-KP/2019",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 3 TAHUN 2019",
                subtitle: "TENTANG TATA CARA PENETAPAN STATUS PERLINDUNGAN JENIS IKAN YANG DILINDUNGI",
                category: "pelabuhan",
                year: "2019",
                pages: "36",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa untuk melindungi jenis ikan tertentu dari kepunahan, perlu menetapkan status perlindungan jenis ikan;</p>
                    <p>b. bahwa berdasarkan pertimbangan sebagaimana dimaksud dalam huruf a, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Tata Cara Penetapan Status Perlindungan Jenis Ikan yang Dilindungi;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    <p>2. Undang-Undang Nomor 5 Tahun 1990 tentang Konservasi Sumber Daya Alam Hayati dan Ekosistemnya;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG TATA CARA PENETAPAN STATUS PERLINDUNGAN JENIS IKAN YANG DILINDUNGI.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Jenis ikan yang dilindungi adalah jenis ikan yang karena populasi dan/atau daerah sebarannya terbatas dan/atau penurunan jumlah populasi yang drastis dikhawatirkan terancam punah.</p>
                        <p>2. Status perlindungan adalah penggolongan jenis ikan berdasarkan tingkat keterancaman punah.</p>
                        <p>3. Kriteria adalah ukuran atau patokan yang digunakan sebagai dasar penilaian atau penetapan status perlindungan jenis ikan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>KRITERIA PENETAPAN</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>Kriteria penetapan status perlindungan jenis ikan meliputi:</p>
                        <p>a. ukuran populasi;</p>
                        <p>b. daerah sebaran;</p>
                        <p>c. tingkat penurunan populasi;</p>
                        <p>d. tingkat ancaman.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 5 Februari 2019<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SUSI PUDJIASTUTI</strong>
                    </p>
                `
            },
            6: {
                number: "15/PERMEN-KP/2018",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 15 TAHUN 2018",
                subtitle: "TENTANG PENGELOLAAN SUMBER DAYA IKAN DI ZONA EKONOMI EKSKLUSIF INDONESIA",
                category: "perikanan",
                year: "2018",
                pages: "41",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa Zona Ekonomi Eksklusif Indonesia merupakan wilayah dengan potensi sumber daya ikan yang besar yang perlu dikelola secara optimal dan berkelanjutan;</p>
                    <p>b. bahwa untuk mengoptimalkan pengelolaan sumber daya ikan di Zona Ekonomi Eksklusif Indonesia, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Pengelolaan Sumber Daya Ikan di Zona Ekonomi Eksklusif Indonesia;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 5 Tahun 1983 tentang Zona Ekonomi Eksklusif Indonesia;</p>
                    <p>2. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG PENGELOLAAN SUMBER DAYA IKAN DI ZONA EKONOMI EKSKLUSIF INDONESIA.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Zona Ekonomi Eksklusif Indonesia yang selanjutnya disebut ZEEI adalah zona di luar dan berbatasan dengan laut teritorial Indonesia sebagaimana ditetapkan berdasarkan undang-undang yang berlaku tentang perairan Indonesia yang meliputi dasar laut, tanah di bawahnya, dan air di atasnya dengan batas terluar 200 (dua ratus) mil laut diukur dari garis pangkal laut teritorial Indonesia.</p>
                        <p>2. Sumber daya ikan adalah potensi semua jenis ikan.</p>
                        <p>3. Kapal perikanan asing adalah kapal perikanan yang berbendera asing.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>PENGELOLAAN SUMBER DAYA IKAN</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>(1) Pengelolaan sumber daya ikan di ZEEI dilaksanakan berdasarkan prinsip keberlanjutan.</p>
                        <p>(2) Pengelolaan sebagaimana dimaksud pada ayat (1) meliputi perencanaan, pemanfaatan, dan pengendalian.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 20 Agustus 2018<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SUSI PUDJIASTUTI</strong>
                    </p>
                `
            },
            7: {
                number: "7/PERMEN-KP/2023",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 7 TAHUN 2023",
                subtitle: "TENTANG STANDAR OPERASIONAL PROSEDUR BUDIDAYA IKAN YANG BAIK",
                category: "budidaya",
                year: "2023",
                pages: "38",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa untuk meningkatkan kualitas dan daya saing produk budidaya ikan, perlu ditetapkan Standar Operasional Prosedur Budidaya Ikan yang Baik;</p>
                    <p>b. bahwa berdasarkan pertimbangan sebagaimana dimaksud dalam huruf a, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Standar Operasional Prosedur Budidaya Ikan yang Baik;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    <p>2. Peraturan Pemerintah Nomor 28 Tahun 2021 tentang Penyelenggaraan Perikanan Budidaya;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG STANDAR OPERASIONAL PROSEDUR BUDIDAYA IKAN YANG BAIK.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Budidaya ikan adalah kegiatan untuk memelihara, membesarkan, dan/atau membiakkan ikan dan memanen hasilnya dalam lingkungan yang terkontrol.</p>
                        <p>2. Standar Operasional Prosedur Budidaya Ikan yang Baik yang selanjutnya disebut SOP Budidaya adalah acuan yang digunakan dalam pelaksanaan budidaya ikan untuk menghasilkan produk yang aman, bermutu, dan berdaya saing.</p>
                        <p>3. Unit pembenihan adalah tempat kegiatan untuk menghasilkan benih ikan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>STANDAR OPERASIONAL PROSEDUR</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>SOP Budidaya meliputi:</p>
                        <p>a. pemilihan lokasi;</p>
                        <p>b. pengelolaan kualitas air;</p>
                        <p>c. penggunaan pakan;</p>
                        <p>d. pengendalian penyakit;</p>
                        <p>e. pemanenan dan penanganan pascapanen.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 25 Mei 2023<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SAKTI WAHYU TRENGGONO</strong>
                    </p>
                `
            },
            8: {
                number: "10/PERMEN-KP/2022",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 10 TAHUN 2022",
                subtitle: "TENTANG PENGELOLAAN KAWASAN KONSERVASI PERAIRAN",
                category: "pengelolaan",
                year: "2022",
                pages: "47",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa kawasan konservasi perairan merupakan bagian penting dari pengelolaan sumber daya kelautan dan perikanan secara berkelanjutan;</p>
                    <p>b. bahwa untuk meningkatkan efektivitas pengelolaan kawasan konservasi perairan, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Pengelolaan Kawasan Konservasi Perairan;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    <p>2. Undang-Undang Nomor 27 Tahun 2007 tentang Pengelolaan Wilayah Pesisir dan Pulau-Pulau Kecil;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG PENGELOLAAN KAWASAN KONSERVASI PERAIRAN.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Kawasan konservasi perairan adalah kawasan perairan yang dilindungi, dikelola dengan sistem zonasi, untuk mewujudkan pengelolaan sumber daya ikan dan lingkungannya secara berkelanjutan.</p>
                        <p>2. Zonasi adalah pembagian wilayah kawasan konservasi perairan berdasarkan fungsi dan peruntukannya.</p>
                        <p>3. Masyarakat adalah kelompok orang yang bermukim di dalam dan/atau di sekitar kawasan konservasi perairan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>ZONASI KAWASAN KONSERVASI</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>(1) Kawasan konservasi perairan terdiri dari beberapa zona.</p>
                        <p>(2) Zona sebagaimana dimaksud pada ayat (1) meliputi:</p>
                        <p>a. zona inti;</p>
                        <p>b. zona pemanfaatan terbatas;</p>
                        <p>c. zona lainnya sesuai dengan kebutuhan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 15 Agustus 2022<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SAKTI WAHYU TRENGGONO</strong>
                    </p>
                `
            },
            9: {
                number: "4/PERMEN-KP/2021",
                title: "PERATURAN MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA NOMOR 4 TAHUN 2021",
                subtitle: "TENTANG STANDAR TEKNIS KAPAL PENANGKAPAN IKAN",
                category: "kapal",
                year: "2021",
                pages: "29",
                content: `
                    <p style="text-align: center; margin-top: 20px;">DENGAN RAHMAT TUHAN YANG MAHA ESA</p>
                    <p style="text-align: center; margin-bottom: 30px;">MENTERI KELAUTAN DAN PERIKANAN REPUBLIK INDONESIA,</p>
                    
                    <div class="pdf-bab">Menimbang:</div>
                    <p>a. bahwa untuk menjamin keselamatan dan keamanan kapal penangkapan ikan, perlu ditetapkan standar teknis kapal penangkapan ikan;</p>
                    <p>b. bahwa berdasarkan pertimbangan sebagaimana dimaksud dalam huruf a, perlu menetapkan Peraturan Menteri Kelautan dan Perikanan tentang Standar Teknis Kapal Penangkapan Ikan;</p>
                    
                    <div class="pdf-bab">Mengingat:</div>
                    <p>1. Undang-Undang Nomor 17 Tahun 2008 tentang Pelayaran;</p>
                    <p>2. Undang-Undang Nomor 31 Tahun 2004 tentang Perikanan;</p>
                    
                    <div class="pdf-bab">MEMUTUSKAN:</div>
                    <p>Menetapkan: PERATURAN MENTERI KELAUTAN DAN PERIKANAN TENTANG STANDAR TEKNIS KAPAL PENANGKAPAN IKAN.</p>
                    
                    <div class="pdf-bab">BAB I<br>KETENTUAN UMUM</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 1</div>
                        <p>Dalam Peraturan Menteri ini yang dimaksud dengan:</p>
                        <p>1. Kapal penangkapan ikan adalah kapal, perahu, atau alat apung lain yang digunakan secara langsung untuk melakukan penangkapan ikan.</p>
                        <p>2. Standar teknis adalah spesifikasi teknis yang harus dipenuhi oleh kapal penangkapan ikan.</p>
                        <p>3. Gross Tonnage (GT) adalah ukuran besarnya kapal yang dinyatakan dalam tonase kotor.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB II<br>STANDAR TEKNIS</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 2</div>
                        <p>(1) Kapal penangkapan ikan wajib memenuhi standar teknis sesuai dengan ukurannya.</p>
                        <p>(2) Standar teknis sebagaimana dimaksud pada ayat (1) meliputi:</p>
                        <p>a. konstruksi kapal;</p>
                        <p>b. permesinan;</p>
                        <p>c. alat navigasi;</p>
                        <p>d. alat keselamatan.</p>
                    </div>
                    
                    <div class="pdf-bab">BAB III<br>KETENTUAN PENUTUP</div>
                    
                    <div class="pdf-pasal">
                        <div class="pdf-pasal-title">Pasal 3</div>
                        <p>Peraturan Menteri ini mulai berlaku pada tanggal diundangkan.</p>
                    </div>
                    
                    <p style="text-align: right; margin-top: 100px;">
                        Ditetapkan di Jakarta<br>
                        pada tanggal 10 Maret 2021<br>
                        <br>
                        MENTERI KELAUTAN DAN PERIKANAN<br>
                        REPUBLIK INDONESIA<br>
                        <br>
                        <br>
                        <br>
                        <strong>SAKTI WAHYU TRENGGONO</strong>
                    </p>
                `
            }
        };

        let currentPeraturanNumber = 1;

        // ==================== FUNGSI UTAMA ====================

        // Fungsi untuk membuat elemen peraturan card
        function createPeraturanCard(number, data) {
            const categoryLabels = {
                'perikanan': 'Perikanan Tangkap',
                'budidaya': 'Budidaya Perikanan',
                'pengelolaan': 'Pengelolaan Sumber Daya',
                'kapal': 'Kapal dan Alat Tangkap',
                'pelabuhan': 'Pelabuhan Perikanan'
            };

            return `
                <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-year="${data.year}" data-category="${data.category}">
                    <div class="peraturan-card h-100 d-flex flex-column">
                        <div class="peraturan-number">${number}</div>
                        <h4 class="peraturan-title">Permen KP No. ${data.number}</h4>
                        <p class="peraturan-desc">${data.subtitle}</p>
                        
                        <div class="peraturan-meta mt-auto">
                            <span><i class="far fa-calendar"></i> ${data.year}</span>
                            <span><i class="far fa-file-pdf"></i> ${data.pages} Halaman</span>
                            <span><i class="fas fa-tag"></i> ${categoryLabels[data.category]}</span>
                        </div>
                        
                        <div class="d-flex gap-2 mt-auto">
                            <button class="btn-download flex-grow-1" onclick="showPeraturanModal(${number})">
                                <i class="fas fa-eye me-2"></i>Preview
                            </button>
                            <button class="btn-download" onclick="generatePDF(${number})" style="width: auto; padding: 10px 15px;">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Fungsi untuk memuat peraturan ke halaman
        function loadPeraturanCards() {
            const container = document.getElementById('peraturanContainer');
            let html = '';
            
            for (let i = 1; i <= 9; i++) {
                html += createPeraturanCard(i, peraturanData[i]);
            }
            
            container.innerHTML = html;
        }

        // Fungsi untuk menampilkan modal preview
        function showPeraturanModal(number) {
            currentPeraturanNumber = number;
            const data = peraturanData[number];
            const modalContent = document.getElementById('modalPeraturanContent');
            
            modalContent.innerHTML = `
                <div class="modal-kop">
                    <img src="https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/garuda.png" alt="Lambang Garuda" style="height: 100px;">
                    <h3>PERATURAN MENTERI KELAUTAN DAN PERIKANAN</h3>
                    <h3>REPUBLIK INDONESIA</h3>
                    <h4>${data.title}</h4>
                    <h4>${data.subtitle}</h4>
                </div>
                <div class="modal-content">
                    ${data.content.replace(/pdf-bab/g, 'modal-bab').replace(/pdf-pasal/g, 'modal-pasal').replace(/pdf-pasal-title/g, 'modal-pasal-title')}
                </div>
            `;
            
            const modalDownloadBtn = document.getElementById('modalDownloadBtn');
            modalDownloadBtn.onclick = () => generatePDF(number);
            
            const modal = new bootstrap.Modal(document.getElementById('peraturanModal'));
            modal.show();
        }

        // Fungsi untuk generate PDF dengan halaman terpisah
        async function generatePDF(number) {
            showLoading(`Sedang membuat PDF Peraturan ${number}...`);
            
            try {
                const data = peraturanData[number];
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4',
                    putOnlyUsedFonts: true,
                    floatPrecision: 16
                });

                // Setup fonts
                pdf.setFont("times", "normal");
                pdf.setFontSize(12);

                // Garuda Logo
                const garudaImg = await loadImage('https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/garuda.png');
                
                // Hitung posisi untuk logo
                const pageWidth = pdf.internal.pageSize.width;
                const logoWidth = 30;
                const logoX = (pageWidth - logoWidth) / 2;
                
                // Add logo
                pdf.addImage(garudaImg, 'PNG', logoX, 20, logoWidth, logoWidth * 1.2);
                
                // Add title
                pdf.setFontSize(14);
                pdf.setFont("times", "bold");
                pdf.text("PERATURAN MENTERI KELAUTAN DAN PERIKANAN", pageWidth / 2, 70, { align: 'center' });
                pdf.text("REPUBLIK INDONESIA", pageWidth / 2, 78, { align: 'center' });
                
                pdf.setFontSize(12);
                pdf.setFont("times", "bold");
                pdf.text(data.title, pageWidth / 2, 90, { align: 'center', maxWidth: 180 });
                
                pdf.setFontSize(11);
                pdf.text(data.subtitle, pageWidth / 2, 100, { align: 'center', maxWidth: 180 });
                
                // Add garis
                pdf.setLineWidth(0.5);
                pdf.line(20, 110, pageWidth - 20, 110);
                
                // Add content
                pdf.setFontSize(10);
                pdf.setFont("times", "normal");
                
                // Parse content HTML
                const content = data.content.replace(/<p[^>]*>/g, '\n').replace(/<\/p>/g, '\n')
                    .replace(/<div class="pdf-bab"[^>]*>/g, '\n\n')
                    .replace(/<div class="pdf-pasal"[^>]*>/g, '\n')
                    .replace(/<div class="pdf-pasal-title"[^>]*>/g, '')
                    .replace(/<\/div>/g, '')
                    .replace(/<br>/g, '\n')
                    .replace(/<strong>/g, '')
                    .replace(/<\/strong>/g, '')
                    .replace(/&nbsp;/g, ' ')
                    .replace(/<[^>]*>/g, '')
                    .trim();
                
                // Split content into lines
                const lines = pdf.splitTextToSize(content, 170);
                
                let yPosition = 120;
                const lineHeight = 5;
                const pageHeight = pdf.internal.pageSize.height;
                
                for (let i = 0; i < lines.length; i++) {
                    if (yPosition > pageHeight - 20) {
                        pdf.addPage();
                        yPosition = 20;
                    }
                    
                    pdf.text(lines[i], 20, yPosition);
                    yPosition += lineHeight;
                }
                
                // Tanda tangan
                pdf.addPage();
                pdf.setFontSize(11);
                pdf.text("Ditetapkan di Jakarta", pageWidth - 30, 100, { align: 'right' });
                pdf.text("pada tanggal " + getDateFromNumber(number), pageWidth - 30, 108, { align: 'right' });
                
                pdf.text("MENTERI KELAUTAN DAN PERIKANAN", pageWidth / 2, 150, { align: 'center' });
                pdf.text("REPUBLIK INDONESIA", pageWidth / 2, 158, { align: 'center' });
                
                pdf.text(getMinisterName(number), pageWidth / 2, 200, { align: 'center' });
                
                // Save PDF
                pdf.save(`Peraturan-KKP-${data.number.replace('/', '-')}.pdf`);
                
                showNotification(`PDF Peraturan ${number} berhasil diunduh!`, 'success');
                
            } catch (error) {
                console.error('Error generating PDF:', error);
                showNotification('Terjadi kesalahan saat membuat PDF. Silakan coba lagi.', 'error');
            } finally {
                hideLoading();
            }
        }

        // Helper function untuk load image
        function loadImage(url) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.crossOrigin = 'anonymous';
                img.onload = () => resolve(img);
                img.onerror = reject;
                img.src = url;
            });
        }

        // Helper function untuk tanggal
        function getDateFromNumber(number) {
            const dates = {
                1: "15 Januari 2023",
                2: "20 Maret 2022",
                3: "15 Juli 2021",
                4: "10 April 2020",
                5: "5 Februari 2019",
                6: "20 Agustus 2018",
                7: "25 Mei 2023",
                8: "15 Agustus 2022",
                9: "10 Maret 2021"
            };
            return dates[number] || "tanggal tidak ditentukan";
        }

        // Helper function untuk nama menteri
        function getMinisterName(number) {
            if ([1, 2, 3, 7, 8, 9].includes(number)) return "SAKTI WAHYU TRENGGONO";
            if (number === 4) return "EDHY PRABOWO";
            if ([5, 6].includes(number)) return "SUSI PUDJIASTUTI";
            return "MENTERI KELAUTAN DAN PERIKANAN";
        }

        // Fungsi untuk generate semua PDF
        async function generateAllPDFs() {
            showLoading("Sedang membuat 9 file PDF... Mohon tunggu.");
            
            try {
                for (let i = 1; i <= 9; i++) {
                    await generatePDF(i);
                    await new Promise(resolve => setTimeout(resolve, 1000)); // Delay antar file
                }
                
                showNotification("Semua 9 peraturan telah berhasil diunduh!", 'success');
                
            } catch (error) {
                console.error('Error generating all PDFs:', error);
                showNotification('Terjadi kesalahan saat membuat PDF. Silakan coba lagi.', 'error');
            } finally {
                hideLoading();
            }
        }

        // Fungsi untuk menampilkan notifikasi
        function showNotification(message, type = 'success') {
            // Hapus notifikasi lama
            const oldNotification = document.querySelector('.notification');
            if (oldNotification) oldNotification.remove();
            
            // Buat notifikasi baru
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'warning' ? 'fa-exclamation-triangle' : 'fa-times-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Hapus notifikasi setelah 3 detik
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Fungsi untuk menampilkan loading
        function showLoading(message = 'Sedang memproses...') {
            // Hapus loading lama
            const oldLoading = document.querySelector('.loading-overlay');
            if (oldLoading) oldLoading.remove();
            
            // Buat loading baru
            const loading = document.createElement('div');
            loading.className = 'loading-overlay';
            loading.innerHTML = `
                <div class="spinner"></div>
                <div style="font-weight: 600; color: var(--primary-dark);">${message}</div>
                <small class="text-muted">Harap tunggu...</small>
            `;
            
            document.body.appendChild(loading);
        }

        // Fungsi untuk menyembunyikan loading
        function hideLoading() {
            const loading = document.querySelector('.loading-overlay');
            if (loading) loading.remove();
        }

        // ==================== EVENT LISTENERS ====================

        // Search Functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('[data-year]');
            
            cards.forEach(card => {
                const title = card.querySelector('.peraturan-title').textContent.toLowerCase();
                const desc = card.querySelector('.peraturan-desc').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || desc.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Filter Functionality
        const filterButtons = document.querySelectorAll('.filter-btn[data-filter]');
        const categoryButtons = document.querySelectorAll('.filter-btn[data-category]');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                const filterValue = this.getAttribute('data-filter');
                const cards = document.querySelectorAll('[data-year]');
                
                cards.forEach(card => {
                    if (filterValue === 'all' || card.getAttribute('data-year') === filterValue) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });

        categoryButtons.forEach(button => {
            button.addEventListener('click', function() {
                categoryButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                const categoryValue = this.getAttribute('data-category');
                const cards = document.querySelectorAll('[data-category]');
                
                cards.forEach(card => {
                    if (categoryValue === 'semua' || card.getAttribute('data-category') === categoryValue) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });

        // Efek Navbar saat scroll
        window.addEventListener('scroll', function() {
            const nav = document.getElementById('mainNav');
            if (window.scrollY > 50) {
                nav.style.boxShadow = "0 10px 30px rgba(0,0,0,0.1)";
                nav.style.background = "rgba(255, 255, 255, 0.98)";
            } else {
                nav.style.boxShadow = "0 4px 20px rgba(0,0,0,0.05)";
                nav.style.background = "rgba(255, 255, 255, 0.95)";
            }
        });

        // Reset filters
        document.querySelector('[data-filter="all"]').addEventListener('click', function() {
            document.querySelector('[data-category="semua"]').click();
        });

        // ==================== INISIALISASI ====================

        // Load peraturan cards saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function() {
            loadPeraturanCards();
            
            // Preload images
            preloadImages();
        });

        // Preload gambar
        function preloadImages() {
            const images = [
                'https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/garuda.png',
                'https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/logo%20kkp.png',
                'https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/LOGO%20KABUPATEN%20SITUBONDO.png',
                'https://raw.githubusercontent.com/pemberdayaannelayan/situbondo/refs/heads/main/peraturan.png'
            ];
            
            images.forEach(src => {
                const img = new Image();
                img.src = src;
            });
        }

        // Animasi smooth scroll untuk anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
